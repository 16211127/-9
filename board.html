<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        let canva = document.getElementById("canvas");
        let painting = false;
        let last=[0,0];
        var ctx = canva.getContext("2d"); //创建画笔
        ctx.strokeStyle = "red";
        ctx.lineWidth = 15;
        ctx.lineCap="round";
        canva.width=document.documentElement.clientWidth;
        canva.height=document.documentElement.clientHeight;
        console.log(canva.width,canva.height);
        drawline=canva.drawline;
        
        var isTouchDevice = 'ontouchstart' in document.documentElement;

        if(isTouchDevice)
        {
            console.log("phone");
            canva.ontouchstart = (e)=>{
                console.log(e);
                painting = true;
                last=[e.touches[0].clientX,e.touches[0].clientY];
                console.log("touchdown");
            }

            canva.ontouchmove = (e) =>{
                if(painting === true)
                {
                    console.log("touchmove");
                    ctx.moveTo(last[0],last[1]);
                    ctx.lineTo(e.touches[0].clientX,e.touches[0].clientY);
                    ctx.stroke();
                    last=[e.clientX,e.clientY]
                }
            }

            canva.ontouchcancel = (e) =>{
                painting = false;
                console.log("touchup");
            }
        }
        
        else{
            console.log("computer");
            canva.onmousedown = (e) =>{
                painting = true;
                last=[e.clientX,e.clientY]
                console.log("down");
            }

            canva.onmousemove = (e) =>{
                if(painting === true)
                {
                    console.log("move");
                    ctx.moveTo(last[0],last[1]);
                    ctx.lineTo(e.clientX,e.clientY);
                    ctx.stroke();
                    last=[e.clientX,e.clientY]
                }
            }

            canva.onmouseup = (e) =>{
                painting = false;
                console.log("up");
            }
                
        }
    </script>
</body>
</html>